<Module>
<ModulePrefs title="marbles" title_url="https://sites.google" description="jquery marbles menu" thumbnail="http://www.gstatic.com/sites-gadgets/common/images/sites-icon-gadget-thumb.png" screenshot="http://www.gstatic.com/sites-gadgets/common/images/sites-icon-gadget-ss.png" height="400" width="400" author="inigo elejalde">
<Require feature="setprefs"/>
</ModulePrefs>
<UserPref name="embed_input_left" display_name="Embedding input left" required="true"/>
<Content type="html" view="home">
<![CDATA[
	<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="https://inigoea.github.io/gadgets/marbles/css/bootstrap.css" rel="stylesheet">
	<style>
	.modal-backdrop.in{
		opacity: 0 !important;
	}
	</style>
	</div> 
	<script type="text/javascript"> function onLoad() {
		var prefs = new _IG_Prefs();
		var result = prefs.getArray('embed_input_left');
		console.log("embed_input_left array values are: "+result);
		var dest = document.getElementById('test').innerHTML = result;
		};
		gadgets.util.registerOnLoadHandler(onLoad); 
	</script>
	<script>
		$(document).ready(function(){
			//load spresheet
			//document.getElementById('test').innerHTML ;
		});	
	</script>
	
	<div class="" id="test">

	</div>


]]>
</Content>
<Content type="html" view="configuration" preferred_height="240">
<![CDATA[
<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script type="text/javascript">
/*function onLoad() {
		var prefs = new _IG_Prefs();
		var result = prefs.getString('embed_input_left');
		//var dest = document.getElementById('googleTable');
		//googleTable.value = result; };
	}*/
var totalLine = 0;
	
function addLine(){
	totalLine++;
	console.log("addLine" + totalLine);
	divString = "<div style=\"margin-top: 10px;\" id=\"left_menu_div_"+totalLine+"\">\
		<input id=\"name_"+totalLine+"\" class=\"input_data\" type=\"text\" style=\"width: 40%\"></input>\
		<input id=\"url_"+totalLine+"\" class=\"input_data\" type=\"text\" style=\"width: 40%\"></input>\
		<button style=\"width: 10%\" onclick=\"removeLine("+totalLine+")\">Del</button>\
	</div>";
	$("#left_menu_div").append(divString);
	}

function removeLine(line){
	console.log("remove line: "+line);
	$( "#left_menu_div_"+line ).remove();
	}
 
function registerHandlers() {
	 var prefs = new gadgets.Prefs();
	 //var pref_div = document.getElementById('left_menu_div');
	 var items = [];
	 
	 var handler = function() {
		items = [];
		$('input').each(function(idx, item){
		items.push(item.text);
		console.log("item.value: "+item.text);
		}); 
		console.log("items values are: "+items);
		prefs.setArray('embed_input_left', items);
	 }; 
	 $('#saveButton').click(handler); 
	 //$('.input_data').keyup(handler); 
 }
 gadgets.util.registerOnLoadHandler(registerHandlers);
</script>

Marbles Left:<br />
<div id="left_menu_div" style="margin-bottom: 10px; margin-top: 10px;">
	<div id="left_menu_div_0">
		<input id="name_0" class="input_data" type="text" style="width: 40%" value="Name" ></input>
		<input id="url_0" class="input_data" type="text" style="width: 40%" value="Url" ></input>
		<button style="width: 10%" onclick="removeLine(0)">Del</button>
	</div>
</div>
<button style="width: 10% float:left;" onclick="addLine()">Add</button>
<button id="saveButton" style="width: 10% float:right;background:#99ff99;">Save</button>
]]>
</Content>
</Module>